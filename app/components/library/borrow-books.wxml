<wxs src="../../utils/index.wxs" module="utils" />
<view class="borrow-books custom-class">
  <image
    wx:if="{{status === 'loading'}}"
    class="loading"
    src="/icon/loading.svg"
  />
  <error-hint
    wx:elif="{{ status === 'error' }}"
    size="mini"
    catch:retry="getBooks"
  />
  <login-hint wx:elif="{{ status === 'login' }}" size="mini" />
  <block wx:else>
    <view class="header">
      借阅书籍
      <button
        class="refresh-button"
        type="default"
        size="mini"
        catch:tap="refresh"
      >
        <text class="icon" />
      </button>
    </view>
    <view class="list">
      <view wx:if="{{books.length === 0}}" class="empty">暂无借阅书籍</view>
      <view
        wx:for="{{books}}"
        class="book"
        data-index="{{index}}"
        hover-class="button-hover"
        hover-start-time="0"
        hover-stay-time="0"
        catch:tap="viewBookDetail"
      >
        <view class="name">{{item.name}}</view>
        <view class="time">
          <text>借出时间: {{utils.displayDate(item.loanDate)}}</text>
          <text>到期时间: {{utils.displayDate(item.dueDate)}}</text>
        </view>
      </view>
    </view>
  </block>
</view>

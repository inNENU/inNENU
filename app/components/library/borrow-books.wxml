<wxs src="../../utils/index.wxs" module="utils" />
<view class="borrow-books custom-class">
  <image
    wx:if="{{status === 'loading'}}"
    class="loading"
    src="/icon/loading.svg"
  />
  <view wx:elif="{{status === 'error'}}" class="failed">è·å–å¤±è´¥</view>
  <block wx:else>
    <view class="header">å€Ÿé˜…ä¹¦ç±</view>
    <view
      wx:if="{{status === 'login'}}"
      class="need-login"
      hover-class="button-hover"
      hover-start-time="0"
      hover-stay-time="0"
      catch:tap="login"
    >
      ç™»é™†è´¦å·ğŸ‘‰
    </view>
    <view wx:else class="list">
      <view wx:if="{{books.length === 0}}" class="empty">æš‚æ— å€Ÿé˜…ä¹¦ç±</view>
      <view
        wx:for="{{books}}"
        class="book"
        data-index="{{index}}"
        hover-class="button-hover"
        hover-start-time="0"
        hover-stay-time="0"
        catch:tap="viewBookDetail"
      >
        <view class="name">{{item.name}}</view>
        <view class="time">
          <text>å€Ÿå‡ºæ—¶é—´: {{utils.displayDate(item.loanDate)}}</text>
          <text>åˆ°æœŸæ—¶é—´: {{utils.displayDate(item.dueDate)}}</text>
        </view>
      </view>
    </view>
  </block>
</view>
